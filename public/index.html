<!-- index.html -->
<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>AuraChat</title>
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
		integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="./css/base.css">
	<link rel="stylesheet" href="./css/layout.css">
	<link rel="stylesheet" href="./css/components.css">
	<link rel="stylesheet" href="./css/auth.css">
	<link rel="stylesheet" href="./css/chat.css">
	<link rel="stylesheet" href="./css/admin.css">
	<link rel="stylesheet" href="./css/responsive.css">
	<link rel="shortcut icon" href="./assets/logo.png" type="image/x-icon">
</head>

<body>
	<svg width="0" height="0" style="position:absolute;z-index:-1;">
		<symbol id="aurachat-logo-symbol" viewBox="0 0 100 100">
			<defs>
				<linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
					<stop offset="0%" style="stop-color:var(--accent1);" />
					<stop offset="100%" style="stop-color:var(--accent2);" />
				</linearGradient>
			</defs>
			<path fill="url(#logoGradient)"
				d="M50 0C22.39 0 0 22.39 0 50s22.39 50 50 50c18.59 0 34.6-10.19 42.68-25.18C86.72 82.32 72.8 91 56 91c-22.09 0-40-17.91-40-40s17.91-40 40-40c15.42 0 28.73 8.74 35.5 21.25C84.34 5.66 68.23 0 50 0z" />
			<path fill="currentColor" fill-opacity="0.7" d="M85,30 a2,2 0 1,1 4,0 a2,2 0 1,1 -4,0" />
			<path fill="currentColor" fill-opacity="0.5" d="M90,45 a1.5,1.5 0 1,1 3,0 a1.5,1.5 0 1,1 -3,0" />
			<path fill="currentColor" fill-opacity="0.9" d="M78,55 a1,1 0 1,1 2,0 a1,1 0 1,1 -2,0" />
		</symbol>
	</svg>

	<div class="app-container">
		<div id="loading-screen" class="loading-overlay">
			<div class="loading-box">
				<svg class="loading-logo" viewBox="0 0 100 100">
					<use href="#aurachat-logo-symbol"></use>
				</svg>
				<p>Initializing AuraChat...</p>
			</div>
		</div>

		<section id="onboarding-screen" class="modal-view glass-panel" style="display: none;">
			<div class="modal-content-wrapper">
				<svg class="modal-logo" viewBox="0 0 100 100">
					<use href="#aurachat-logo-symbol"></use>
				</svg>
				<h2 class="gradient-text">Admin Account Setup</h2>
				<p class="modal-instructions">Create the primary administrator account to launch AuraChat.</p>
				<div id="onboarding-error" class="error modal-error" role="alert" aria-live="polite"></div>
				<form id="onboarding-form" class="auth-form" novalidate>
					<div class="form-group">
						<label for="onboarding-username">Admin Username</label>
						<input type="text" id="onboarding-username" name="username"
							placeholder="Min. 3 characters" required minlength="3" />
					</div>
					<div class="form-group">
						<label for="onboarding-password">Admin Password</label>
						<input type="password" id="onboarding-password" name="password"
							placeholder="Min. 8 characters" required minlength="8" />
					</div>
					<div class="form-group">
						<label for="onboarding-master-password">Master Password</label>
						<input type="password" id="onboarding-master-password" name="masterPassword"
							placeholder="Min. 10 characters" required minlength="10"
							aria-describedby="master-password-desc" />
						<p id="master-password-desc" class="form-hint">This grants access to the admin dashboard.
							Keep it secure.</p>
					</div>
					<button type="submit" id="onboarding-submit" class="custom-button button-primary button-full">
						<span class="button-text">Create Admin & Launch</span>
						<i class="fa-solid fa-circle-notch fa-spin button-spinner" style="display: none;"></i>
					</button>
				</form>
			</div>
		</section>

		<section id="login-screen" class="modal-view glass-panel" style="display: none;">
			<div class="modal-content-wrapper">
				<svg class="modal-logo" viewBox="0 0 100 100">
					<use href="#aurachat-logo-symbol"></use>
				</svg>
				<h2 class="gradient-text">Welcome to AuraChat</h2>
				<p class="modal-instructions">Connect and Converse Securely.</p>
				<div id="login-error" class="error modal-error" role="alert" aria-live="polite"></div>
				<div class="tabs">
					<button id="user-login-tab" class="tab-button active"><i
							class="fa-solid fa-user-astronaut"></i> User
						Login</button>
					<button id="admin-login-tab" class="tab-button"><i class="fa-solid fa-user-shield"></i>
						Admin Access</button>
				</div>
				<form id="user-login-form" class="login-form-panel auth-form active-panel" novalidate>
					<div class="form-group">
						<label for="login-username">Username</label>
						<input type="text" id="login-username" name="username" placeholder="Enter your username"
							required />
					</div>
					<div class="form-group">
						<label for="login-password">Password</label>
						<input type="password" id="login-password" name="password"
							placeholder="Enter your password" required />
					</div>
					<button type="submit" id="login-submit" class="custom-button button-primary button-full">
						<i class="fa-solid fa-right-to-bracket button-icon"></i>
						<span class="button-text">Sign In</span>
						<i class="fa-solid fa-circle-notch fa-spin button-spinner" style="display: none;"></i>
					</button>
				</form>
				<form id="admin-login-form" class="login-form-panel auth-form" novalidate>
					<div class="form-group">
						<label for="admin-master-password">Master Password</label>
						<input type="password" id="admin-master-password" name="masterPassword"
							placeholder="Enter master password" required />
					</div>
					<button type="submit" id="admin-login-submit" class="custom-button button-primary button-full">
						<i class="fa-solid fa-shield-halved button-icon"></i>
						<span class="button-text">Access Dashboard</span>
						<i class="fa-solid fa-circle-notch fa-spin button-spinner" style="display: none;"></i>
					</button>
					<p class="form-switch-text">
						<button type="button" class="link-button switch-to-user-login">
							<i class="fa-solid fa-arrow-left"></i> Back to User Login
						</button>
					</p>
				</form>
			</div>
		</section>

		<div id="chat-app" class="chat-layout glass-panel" style="display: none;">
			<aside class="left-panel">
				<header class="panel-header">
					<div class="user-profile-summary">
						<div class="avatar avatar-small" id="my-avatar-summary"><i
								class="fa-solid fa-user-astronaut"></i></div>
						<span id="my-username-summary" class="user-name-display">Username</span>
					</div>
					<div class="panel-actions">
						<button type="button" class="custom-button icon-button" id="manage-blocks-button"
							title="Manage Blocked Users"><i
								class="fa-solid fa-user-slash button-icon"></i></button>
						<button type="button" class="custom-button icon-button" id="theme-toggle-button"
							title="Toggle Theme"><i class="fa-solid fa-sun button-icon"></i></button>
						<button type="button" class="custom-button icon-button" id="logout-button"
							title="Logout"><i class="fa-solid fa-right-from-bracket button-icon"></i></button>
					</div>
				</header>
				<div class="search-bar-container">
					<div class="search-bar">
						<i class="fa-solid fa-magnifying-glass search-icon"></i>
						<input type="search" id="conversation-search" placeholder="Search chats or users..." />
					</div>
				</div>
				<nav class="conversation-list" id="conversation-list-area">
					<div class="list-placeholder"><i class="fa-solid fa-spinner fa-spin"></i> Loading chats...
					</div>
				</nav>
			</aside>
			<main class="right-panel">
				<div id="chat-view-placeholder" class="chat-view-placeholder">
					<button type="button" class="custom-button icon-button mobile-placeholder-menu-button"
						id="mobile-placeholder-menu-toggle" title="Toggle Menu"><i
							class="fa-solid fa-bars button-icon"></i></button>
					<svg class="placeholder-logo" viewBox="0 0 100 100">
						<use href="#aurachat-logo-symbol"></use>
					</svg>
					<p>Select a conversation to start chatting</p>
				</div>
				<div id="chat-view-content" style="display: none;">
					<header class="chat-header" id="chat-view-header">
						<button type="button" class="custom-button icon-button mobile-menu-button"
							id="mobile-menu-toggle" title="Toggle Menu"><i
								class="fa-solid fa-bars button-icon"></i></button>
						<div class="contact-info">
							<div class="avatar" id="chat-partner-avatar"><i class="fa-solid fa-user"></i></div>
							<div class="contact-details">
								<span class="contact-name" id="chat-partner-name"></span>
								<div class="status-and-typing">
									<span class="contact-status" id="chat-partner-status"></span>
								</div>
							</div>
						</div>
						<div class="header-actions">
							<button type="button" class="custom-button icon-button" id="block-user-button"
								data-action="block-user" title="Block User" style="display: none;"><i
									class="fa-solid fa-user-lock button-icon"></i></button>
							<button type="button" class="custom-button icon-button" id="refresh-messages-button"
								title="Refresh Messages" style="display: none;">
								<i class="fa-solid fa-rotate-right button-icon"></i>
								<i class="fa-solid fa-circle-notch fa-spin button-spinner"
									style="display: none;"></i>
							</button>
						</div>
					</header>
					<div class="chat-messages" id="message-area">
						<div class="older-messages-loader" id="older-messages-loader" style="display: none;"><i
								class="fa-solid fa-circle-notch fa-spin"></i></div>
						<div class="messages-list-wrapper"></div>
						<button type="button" id="manual-load-older-button" class="custom-button"
							style="display: none;"><i class="fa-solid fa-rotate-left button-icon"></i><span
								class="button-text">Load Older</span><i
								class="fa-solid fa-circle-notch fa-spin button-spinner"
								style="display: none;"></i></button>
					</div>
					<footer class="chat-input-area">
						<div id="reply-context-area" class="reply-context" style="display: none;">
							<div class="reply-context-content">
								<span class="reply-context-header">Replying to <span
										id="reply-context-user"></span></span>
								<p id="reply-context-text"></p>
							</div>
							<button type="button" id="cancel-reply-button"
								class="custom-button icon-button cancel-reply-button" title="Cancel Reply"><i
									class="fa-solid fa-xmark button-icon"></i></button>
						</div>
						<div id="emoji-panel" style="display: none;">
							<div class="emoji-grid"></div>
						</div>
						<div class="message-compose">
							<button type="button" class="custom-button icon-button" id="emoji-toggle-button"
								title="Emoji"><i class="fa-regular fa-face-smile button-icon"></i></button>
							<textarea id="message-input" placeholder="Send an aura wave..." rows="1"></textarea>
							<button type="button" class="custom-button send-button" id="send-button"
								title="Send Message">
								<i class="fa-solid fa-paper-plane button-icon"></i>
								<i class="fa-solid fa-circle-notch fa-spin button-spinner"
									style="display: none;"></i>
							</button>
						</div>
					</footer>
				</div>
			</main>
			<div class="panel-overlay" id="panel-overlay"></div>
		</div>

		<div id="admin-dashboard" class="admin-layout glass-panel" style="display: none;">
			<header class="admin-header">
				<h1><i class="fa-solid fa-solar-panel"></i> Admin Aura Panel</h1>
				<div class="header-actions">
					<span id="admin-username-display" class="user-name-display">Admin</span>
					<button type="button" class="custom-button icon-button" id="admin-theme-toggle-button"
						title="Toggle Theme"><i class="fa-solid fa-sun button-icon"></i></button>
					<button type="button" class="custom-button icon-button" id="admin-logout-button"
						title="Logout Admin"><i class="fa-solid fa-right-from-bracket button-icon"></i></button>
				</div>
			</header>
			<main class="admin-content">
				<section class="admin-section glass-panel-inner">
					<h2 class="gradient-text"><i class="fa-solid fa-chart-line"></i> System Overview</h2>
					<div class="stats-grid">
						<div class="stat-card"><i class="fa-solid fa-users stat-icon"></i><span class="stat-value"
								id="stat-total-users">--</span><span class="stat-label">Total Users</span></div>
						<div class="stat-card"><i class="fa-solid fa-comments stat-icon"></i><span
								class="stat-value" id="stat-total-messages">--</span><span
								class="stat-label">Total Messages</span></div>
						<div class="stat-card"><i class="fa-solid fa-satellite-dish stat-icon"></i><span
								class="stat-value" id="stat-total-conversations">--</span><span
								class="stat-label">Conversations</span></div>
						<div class="stat-card"><i class="fa-solid fa-wifi stat-icon"></i><span class="stat-value"
								id="stat-active-users">--</span><span class="stat-label">Active Users</span>
						</div>
					</div>
				</section>
				<section class="admin-section glass-panel-inner" id="admin-user-management">
					<h2 class="gradient-text"><i class="fa-solid fa-users-gear"></i> User Management</h2>
					<div id="admin-user-error" class="error modal-error" aria-live="polite"></div>
					<div class="admin-actions-container">
						<form id="admin-add-user-form" class="admin-form">
							<h3><i class="fa-solid fa-user-plus"></i> Add New User</h3>
							<div class="form-group">
								<label for="admin-add-username">Username</label>
								<input type="text" id="admin-add-username" name="username"
									placeholder="Min. 3 characters" required minlength="3" />
							</div>
							<div class="form-group">
								<label for="admin-add-password">Password</label>
								<input type="password" id="admin-add-password" name="password"
									placeholder="Min. 8 characters" required minlength="8" />
							</div>
							<button type="submit" id="admin-add-user-button"
								class="custom-button button-primary button-full">
								<span class="button-text">Create User</span>
								<i class="fa-solid fa-circle-notch fa-spin button-spinner"
									style="display: none;"></i>
							</button>
						</form>
						<div class="admin-user-list-container">
							<h3><i class="fa-solid fa-address-book"></i> User Accounts</h3>
							<div class="table-container">
								<table>
									<thead>
										<tr>
											<th>ID</th>
											<th>Username</th>
											<th>Last Active</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody id="admin-user-list-body"></tbody>
								</table>
							</div>
						</div>
					</div>
				</section>
			</main>
		</div>

		<div id="manage-blocks-modal" class="modal-view glass-panel" style="display: none;">
			<div class="modal-content-wrapper">
				<button type="button" class="custom-button icon-button modal-close-button"
					aria-label="Close blocked users modal"><i class="fa-solid fa-xmark button-icon"></i></button>
				<i class="modal-icon fa-solid fa-user-lock"></i>
				<h2 class="gradient-text">Blocked Users</h2>
				<div id="manage-blocks-error" class="error modal-error" aria-live="polite"></div>
				<div id="blocked-users-list" class="blocked-list"></div>
			</div>
		</div>

		<div id="confirmation-modal-overlay" class="confirmation-modal-overlay" style="display: none;" role="dialog"
			aria-modal="true" aria-labelledby="confirmation-message">
			<div class="confirmation-modal-box glass-panel">
				<p id="confirmation-message" class="confirmation-prompt">Are you sure?</p>
				<div class="confirmation-buttons">
					<button type="button" id="confirm-yes-button" class="custom-button button-confirm">Yes</button>
					<button type="button" id="confirm-no-button" class="custom-button button-cancel">No</button>
				</div>
			</div>
		</div>

		<div id="error-banner" class="error-banner" role="alert" style="display: none;">
			<i class="fa-solid fa-triangle-exclamation error-icon"></i>
			<span id="error-banner-message"></span>
			<button id="error-banner-close" class="error-banner-close" aria-label="Close error message"><i
					class="fa-solid fa-xmark"></i></button>
		</div>
	</div>

	<script type="module" src="./js/main.js"></script>
</body>

</html>